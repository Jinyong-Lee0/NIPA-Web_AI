{"version":3,"sources":["script.js"],"names":["modalToggle","modal","classList","toggle","value","renameInputBox","i","j","omok","append","element","querySelector","renameSubmit","document","setAttribute","concat","x","createElementNode","nowPlayer","MM","SS","timeout","setInterval","omokBoard","innerText","alert","gameWon","clearInterval","style","bottom","setTimeout","y","find","dy","contains","max","arr","horizonFind","winner","findXY","dx","findWinner","verticalFind","Number","addEventListener","setPlayerName","start","renameButton","querySelectorAll","diagonalFind","e","target","add","getAttribute","playGame","startGame","_loop","trim","players"],"mappings":"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","file":"script.min.js","sourcesContent":["(() => {\n    const omok = document.querySelector(\"#omok\");\n    const omokBoard = document.querySelector(\"#omok-background\");\n    const start = document.querySelector(\"#start\");\n    const renameButton = document.querySelectorAll(\".rename\");\n    const modal = document.querySelector(\"#modal\");\n    const renameInputBox = document.querySelector(\"#modal input\");\n    const renameSubmit = document.querySelector(\"#modal .flex\");\n    const createElementNode = (element, x, y) => {\n        let el = document.createElement(element);\n        el.setAttribute(\"data-x\", `${x}`);\n        el.setAttribute(\"data-y\", `${y}`);\n        return el;\n    };\n\n    const timeout = () => {\n        let MM = 5;\n        let SS = 0;\n        let timeout = setInterval(() => {\n            if (SS === 0) {\n                MM--;\n                SS = 59;\n            } else {\n                SS--;\n            }\n            omokBoard.querySelector(\n                \".game-time\"\n            ).innerText = `남은 시간 : ${MM}:${SS}`;\n            if (MM === 0 && SS === 0) {\n                clearInterval(timeout);\n                alert(\"Timeout!\");\n                gameWon = true;\n                setTimeout(() => {\n                    omokBoard.style.bottom = \"100%\";\n                    gameWon = false;\n                }, 1000);\n            }\n        }, 1000);\n    };\n\n    const modalToggle = () => {\n        modal.classList.toggle(\"hide\");\n    };\n\n    const setPlayerName = (players) => {\n        const player = document.querySelector(`#player${players} .player-name`);\n        player.innerText = renameInputBox.value;\n        renameInputBox.value = \"\";\n    };\n\n    const startGame = () => {\n        for (let i = 0; i < 30; i++) {\n            for (let j = 0; j < 30; j++) {\n                omok.append(createElementNode(\"div\", j, i));\n            }\n        }\n        omokBoard.style.bottom = \"0\";\n        nowPlayer = 1;\n        timeout();\n    };\n\n    const playGame = (e) => {\n        if (gameWon !== true) {\n            if (\n                e.target.classList.contains(\"X\") ||\n                e.target.classList.contains(\"O\")\n            ) {\n                return;\n            }\n            if (nowPlayer === 0) {\n                e.target.classList.add(\"X\");\n                nowPlayer = 1;\n                omokBoard.querySelector(\".now-player\").innerText =\n                    \"현재 : 흰색\";\n                findWinner(\n                    e.target.getAttribute(\"data-x\"),\n                    e.target.getAttribute(\"data-y\"),\n                    \"X\"\n                );\n            } else {\n                e.target.classList.add(\"O\");\n                nowPlayer = 0;\n                omokBoard.querySelector(\".now-player\").innerText =\n                    \"현재 : 검정색\";\n                findWinner(\n                    e.target.getAttribute(\"data-x\"),\n                    e.target.getAttribute(\"data-y\"),\n                    \"O\"\n                );\n            }\n        }\n    };\n\n    const verticalFind = (x, y, find) => {\n        const findXY = (x, dy) => {\n            let arr = [\n                document\n                    .querySelector(`div[data-x=\"${x}\"][data-y=\"${dy}\"]`)\n                    .classList.contains(find),\n                document\n                    .querySelector(`div[data-x=\"${x}\"][data-y=\"${dy + 1}\"]`)\n                    .classList.contains(find),\n                document\n                    .querySelector(`div[data-x=\"${x}\"][data-y=\"${dy + 2}\"]`)\n                    .classList.contains(find),\n                document\n                    .querySelector(`div[data-x=\"${x}\"][data-y=\"${dy + 3}\"]`)\n                    .classList.contains(find),\n                document\n                    .querySelector(`div[data-x=\"${x}\"][data-y=\"${dy + 4}\"]`)\n                    .classList.contains(find),\n            ];\n\n            if (arr[0] && arr[1] && arr[2] && arr[3] && arr[4]) {\n                const winner =\n                    find === \"O\"\n                        ? document.querySelector(\"#player2 .player-name\")\n                              .innerText\n                        : document.querySelector(\"#player1 .player-name\")\n                              .innerText;\n                alert(`${winner} wins!`);\n                gameWon = true;\n                setTimeout(() => {\n                    omokBoard.style.bottom = \"100%\";\n                    gameWon = false;\n                }, 1000);\n            }\n        };\n\n        let max;\n        y + 4 < 30 ? (max = y + 4) : (max = 29);\n        if (y < 4) {\n            for (let dy = 0; dy < max; dy++) {\n                if (!gameWon) findXY(x, dy);\n            }\n        } else {\n            for (let dy = y - 4; dy <= max; dy++) {\n                if (!gameWon) findXY(x, dy);\n            }\n        }\n    };\n\n    const horizonFind = (x, y, find) => {\n        const findXY = (dx, y) => {\n            let arr = [\n                document\n                    .querySelector(`div[data-x=\"${dx}\"][data-y=\"${y}\"]`)\n                    .classList.contains(find),\n                document\n                    .querySelector(`div[data-x=\"${dx + 1}\"][data-y=\"${y}\"]`)\n                    .classList.contains(find),\n                document\n                    .querySelector(`div[data-x=\"${dx + 2}\"][data-y=\"${y}\"]`)\n                    .classList.contains(find),\n                document\n                    .querySelector(`div[data-x=\"${dx + 3}\"][data-y=\"${y}\"]`)\n                    .classList.contains(find),\n                document\n                    .querySelector(`div[data-x=\"${dx + 4}\"][data-y=\"${y}\"]`)\n                    .classList.contains(find),\n            ];\n\n            if (arr[0] && arr[1] && arr[2] && arr[3] && arr[4]) {\n                const winner =\n                    find === \"O\"\n                        ? document.querySelector(\"#player2 .player-name\")\n                              .innerText\n                        : document.querySelector(\"#player1 .player-name\")\n                              .innerText;\n                alert(`${winner} wins!`);\n                gameWon = true;\n                setTimeout(() => {\n                    omokBoard.style.bottom = \"100%\";\n                    gameWon = false;\n                }, 1000);\n            }\n        };\n\n        let max;\n        x + 4 < 30 ? (max = x + 4) : (max = 29);\n        if (x < 4) {\n            for (let dx = 0; dx < max; dx++) {\n                if (!gameWon) findXY(dx, y);\n            }\n        } else {\n            for (let dx = x - 4; dx <= max; dx++) {\n                if (!gameWon) findXY(dx, y);\n            }\n        }\n    };\n\n    const findWinner = (x, y, find) => {\n        verticalFind(Number(x), Number(y), find);\n        horizonFind(Number(x), Number(y), find);\n        diagonalFind(Number(x), Number(y), find);\n    };\n\n    let nowPlayer = 0;\n    let gameWon = false; // New flag to track if a game is already won\n\n    omok.addEventListener(\"click\", (e) => {\n        playGame(e);\n    });\n\n    start.addEventListener(\"click\", () => startGame());\n\n    for (let i = 0; i < 2; i++) {\n        renameButton[i].addEventListener(\"click\", () => {\n            nowPlayer = i + 1;\n            modalToggle();\n        });\n    }\n\n    renameSubmit.addEventListener(\"click\", (e) => {\n        if (e.target.innerText === \"submit\") {\n            if (renameInputBox.value.trim() !== \"\") {\n                setPlayerName(nowPlayer);\n                modalToggle();\n            }\n        } else if (e.target.innerText === \"cancel\") {\n            modalToggle();\n        }\n    });\n})();\n"]}